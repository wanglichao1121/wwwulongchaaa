import{o as s,c as a,l as p}from"./index.df343528.js";const t={class:"markdown-body"},o=p(`<h1>\u6B22\u8FCE\u9875</h1><p>\u804A\u804A\u8FD9\u4E2A<s>\u753B\u86C7\u6DFB\u8DB3\u7684</s>\u6B22\u8FCE\u9875</p><h2>JS\u63A7\u5236\u7684\u52A8\u753B</h2><p>\u5199\u7684\u6BD4\u8F83\u5E74\u8F7B\uFF0C\u8FD8\u4E0D\u77E5\u9053\u65B0\u7684style v-bind\u8BED\u6CD5\uFF0C\u4F9D\u9760bind\u5185\u8054style\u7B97\u662F\u81EA\u5DF1\u5B9E\u73B0\u4E86\u8FD9\u6837\u7684\u529F\u80FD\uFF0C\u4E0D\u8FC7\u4E5F\u8BA9\u6574\u4E2A\u4EE3\u7801\u6709\u70B9\u5197\u957F\u6742\u4E71</p><p>\u4E3E\u4E00\u4E2A\u505A\u4F8B\u5B50\u5427</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> foldingAnimations<span class="token operator">:</span>ComputedRef<span class="token operator">&lt;</span>StyleValue<span class="token operator">&gt;=</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  position<span class="token operator">:</span> <span class="token string">&quot;fixed&quot;</span><span class="token punctuation">,</span>
  top<span class="token operator">:</span> viewHeight<span class="token punctuation">.</span>value<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token string">&#39;px&#39;</span><span class="token punctuation">,</span>
  left<span class="token operator">:</span> viewWidth<span class="token punctuation">.</span>value<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token string">&#39;px&#39;</span><span class="token punctuation">,</span>
  transform<span class="token operator">:</span> <span class="token string">&quot;translate(-50%,-50%)&quot;</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> foldingWidthIncreaseProgress<span class="token punctuation">.</span>value<span class="token operator">*</span><span class="token number">600</span><span class="token operator">+</span><span class="token string">&#39;px&#39;</span><span class="token punctuation">,</span>
  overflow<span class="token operator">:</span> <span class="token string">&#39;hidden&#39;</span><span class="token punctuation">,</span>
  border<span class="token operator">:</span> <span class="token string">&#39;0px solid white&#39;</span><span class="token punctuation">,</span>
  borderLeftWidth<span class="token operator">:</span> foldingBorderWidth<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
  borderRightWidth<span class="token operator">:</span> foldingBorderWidth<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
  height<span class="token operator">:</span> foldingHeightIncreaseProgress<span class="token punctuation">.</span>value<span class="token operator">*</span>viewHeight<span class="token punctuation">.</span>value<span class="token operator">*</span><span class="token number">0.4</span><span class="token operator">+</span><span class="token number">10</span><span class="token operator">+</span><span class="token string">&#39;px&#39;</span><span class="token punctuation">,</span>
  borderRadius<span class="token operator">:</span> <span class="token string">&#39;10px&#39;</span><span class="token punctuation">,</span>
  boxShadow<span class="token operator">:</span> <span class="token string">&quot;0px 0px 20px #888888&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><p>\u52A8\u753B\u88AB\u5206\u6210\u4E86\u4E24\u4E2A\u90E8\u5206\uFF0Canimation\u8BF4\u7684\u662F\u6807\u9898\u5C55\u5F00\u7684\u8FC7\u7A0B\uFF0Cfolding\u8BF4\u7684\u662F\u4E2D\u95F4\u76D2\u5B50\u6253\u5F00\u7684\u8FC7\u7A0B\u3002animation\u662F\u548Cscroll\u8FDB\u5EA6\u5B9E\u65F6\u5BF9\u5E94\u7684\uFF0C\u800Cfolding\u6211\u505A\u7684\u66F4\u50CF\u662F\u4E00\u4E2Atransition \u712F\uFF0C\u8FD9\u4E48\u4E00\u60F3\u597D\u50CF\u5B8C\u5168\u53EF\u4EE5\u7528transition\u505A \u5173\u4E8E\u8FDB\u5EA6\u7528\u7684\u662Fscroll\u7684\u4F4D\u7F6E\u6765\u8BA1\u7B97\u52A8\u753B\u8FDB\u5EA6</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">foldingTime</span><span class="token operator">=</span><span class="token punctuation">(</span>timeStamp<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> elapsed<span class="token operator">=</span>lastStamp<span class="token operator">?</span>timeStamp<span class="token operator">-</span>lastStamp<span class="token operator">:</span><span class="token number">0</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>foldingProgress<span class="token punctuation">.</span>value<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> folding<span class="token punctuation">)</span><span class="token punctuation">{</span>
    foldingProgress<span class="token punctuation">.</span>value<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>foldingProgress<span class="token punctuation">.</span>value<span class="token operator">-</span>elapsed<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>foldingTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastStamp<span class="token operator">=</span>timeStamp
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>foldingProgress<span class="token punctuation">.</span>value<span class="token operator">&lt;</span>foldingFrameCount <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>folding<span class="token punctuation">)</span><span class="token punctuation">{</span>
    foldingProgress<span class="token punctuation">.</span>value<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>foldingProgress<span class="token punctuation">.</span>value<span class="token operator">+</span>elapsed<span class="token punctuation">,</span>foldingFrameCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>foldingTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastStamp<span class="token operator">=</span>timeStamp
  <span class="token punctuation">}</span> <span class="token keyword">else</span>
    lastStamp<span class="token operator">=</span><span class="token keyword">undefined</span>
<span class="token punctuation">}</span>
<span class="token comment">//...</span>
<span class="token keyword">let</span> tickingScroll <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleScroll</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  animate_progress<span class="token punctuation">.</span>value <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token operator">/</span>viewHeight<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  folding<span class="token operator">=</span>animate_progress<span class="token punctuation">.</span>value<span class="token operator">&lt;=</span><span class="token number">0.8</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>foldingTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
  tickingScroll<span class="token operator">=</span><span class="token boolean">false</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;scroll&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tickingScroll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>handleScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tickingScroll <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>\u518D\u7528\u8FDB\u5EA6\u53BB\u7B97style\u7684\u503C</p><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> foldingBorderIncrease<span class="token operator">=</span><span class="token number">200</span>
<span class="token keyword">const</span> foldingBorderIncreaseProgress<span class="token operator">=</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>
  Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>foldingProgress<span class="token punctuation">.</span>value<span class="token operator">/</span>foldingBorderIncrease<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><p>\u5C31\u5F53\u662F\u81EA\u5DF1\u5B9E\u73B0\u4E86\u4E00\u4E0Btransition\u5427\u{1F613}</p><h2>CSS trick</h2><pre class="language-css"><code class="language-css"><span class="token selector">.glass</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    to right bottom<span class="token punctuation">,</span>
    <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>0.6<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>0.1<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>8px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  //boxshadow border-top border-left\u9634\u5F71\u3001\u5DE6\u4E0A\u89D2\u7167\u4EAE
<span class="token punctuation">}</span>
</code></pre><p>\u7F51\u4E0A\u627E\u7684\u4E00\u4E2A\u73BB\u7483\u611F\u7684trick\uFF0C\u7528\u900F\u660E\u5EA6\u6E10\u53D8+\u80CC\u666F\u6A21\u7CCA+\u4E00\u70B9\u70B9\u9AD8\u5149\u9634\u5F71</p>`,14),e=[o],k={setup(c,{expose:n}){return n({frontmatter:{}}),(u,r)=>(s(),a("div",t,e))}};export{k as default};
